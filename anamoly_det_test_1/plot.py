import numpy as np
from matplotlib import pyplot

if __name__ == '__main__':
    mnist = [
        [0.8117840607219354, 0.8366578497163463, 0.8261716663234813, 0.8517500874058479, 0.8666744700695601, 0.8547275733223898, 0.864108000025683, 0.8807350133273039, 0.8948405225842069, 0.8998413327734835 ],
        [ 0.9562241218365529, 0.9665963634582935, 0.9722023757469933, 0.9802314410974012, 0.9827700259216241, 0.9832836515042649, 0.9847048940563295, 0.9855433590356661, 0.985805989021777, 0.9870634219673649],
        [ 0.666926091828321, 0.669431905518510, 0.696000550404619, 0.721226973436105, 0.737710119116070, 0.751343603454666, 0.772221893121987, 0.772440496400719, 0.781596509947892, 0.790606715532463],
        [ 0.7076572282437185, 0.731759448444576, 0.7566363539326885, 0.7747218392929063, 0.7756124559821853, 0.7753814961335349, 0.7762606266248152, 0.7900219392939555, 0.8095382962048835, 0.8151890213537349],
        [ 0.7396327876894898, 0.8199255397472487, 0.8440795821113466, 0.8601198597322106, 0.8700246065435676, 0.8698595162825332, 0.8818633904764971, 0.8897240452587997, 0.8966807404090968, 0.8947911212944011],
        [ 0.7558792236034417, 0.7670910324999541, 0.7745379723000778, 0.7952123677701787, 0.7918352856918421, 0.7857085931488337, 0.8012777202458923, 0.8180334797848554, 0.8283787912556294, 0.8332024718954778],
        [ 0.778227614656556, 0.832642690395732, 0.8468961859218784, 0.8590291787895658, 0.8597182183894261, 0.8636236576106819, 0.8751214320113169, 0.8735304628756932, 0.8801213834947331, 0.8865600547017192],
        [ 0.8379302239714597, 0.849730563106181, 0.8672624126673649, 0.8882663840873949, 0.8980865961604327, 0.9075321910716301, 0.909119021834891, 0.9083995533637295, 0.912574097867985, 0.917248455283909],
        [ 0.7115865776751745, 0.7149560716021442, 0.7174869163214587, 0.7164680190839324, 0.7212737971254629, 0.7338871838529063, 0.7391723560288448, 0.7511827915894432, 0.748177984680842, 0.7568328348283574],
        [ 0.7517944018739019, 0.7791626302516345, 0.8266826791399988, 0.8414592826455479, 0.8443231045355182, 0.843967962201069, 0.8599187083762108, 0.8724211965595103, 0.8825643920590197, 0.8876956181077451],
    ]

    cifar = [
        [0.5916402962962964, 0.5965193999999999, 0.5979531333333332, 0.6018618444444446, 0.5992139925925926, 0.5976106074074075, 0.5999281481481482, 0.6002946740740739, 0.6035253407407408, 0.6045585777777778 ],
        [ 0.38403641481481476, 0.3850349407407408, 0.3847418296296296, 0.3836965037037037, 0.37843210370370367, 0.3763902518518518, 0.37472045925925923, 0.37053929629629634, 0.3690235481481481, 0.36933597777777777],
        [ 0.6145955037037037, 0.6240748444444445, 0.6298770740740741, 0.6352987999999999, 0.638877214814815, 0.6415768592592593, 0.6439411481481481, 0.6444317185185185, 0.6464979777777776, 0.6478013333333335],
        [ 0.5188043555555556, 0.5305625185185185, 0.5317447037037037, 0.5307160962962963, 0.5307022296296295, 0.5357830888888888, 0.5366853999999999, 0.5349012592592591, 0.5362507555555556, 0.539394325925926],
        [ 0.6052778666666665, 0.6315268370370372, 0.6356038074074075, 0.6415183333333333, 0.6466234074074074, 0.6517397777777778, 0.6545178370370371, 0.6579089111111112, 0.6646305925925926, 0.6672730148148147],
        [ 0.5058252074074074, 0.5125562518518519, 0.5138982962962964, 0.5150557703703703, 0.5199700740740741, 0.5226647629629629, 0.5230748148148148, 0.5234324222222222, 0.5219790814814814, 0.5228831185185185],
        [ 0.5612587333333333, 0.5815090222222222, 0.5924161925925926, 0.6030621555555555, 0.6070420148148148, 0.6158375555555555, 0.6196574148148147, 0.6229631555555556, 0.6282301259259259, 0.6326085703703703],
        [ 0.48068570370370367, 0.48473093333333334, 0.4882802888888889, 0.4899133703703704, 0.4890999703703704, 0.4886269481481481, 0.4878974296296297, 0.4901795111111112, 0.49345272592592593, 0.4945149407407406],
        [ 0.6147848074074074, 0.6251508074074074, 0.6276440888888888, 0.6320353925925926, 0.6404310740740742, 0.6435041111111109, 0.6448462222222221, 0.6510984962962963, 0.6524018666666668, 0.653796525925926],
        [ 0.4155683703703703, 0.4038334518518518, 0.39896882962962965, 0.39615634814814815, 0.39689311851851844, 0.3971910444444444, 0.3974997555555555, 0.39557813333333325, 0.3958416, 0.39540542962962955],
    ]
    #
    # fig, ax = pyplot.subplots(1, 2)
    #
    # for di, dataset in enumerate([mnist, cifar]):
    #     sum = 0
    #     for i, l in enumerate(dataset):
    #         ax[di].plot(list(range(1, 10+1)), l, label=f'class: {i+1}')
    #         print(l[-1])
    #         sum += l[-1]
    #
    #     print(f'roc: {sum/10}')
    #
    #     ax[di].legend()
    #     ax[di].set_xticks(list(range(1, 10+1)))
    #     ax[di].grid()
    #
    # pyplot.show()

    cifar_correl_512 = [ 0.7899364814814815, 0.8523601925925927, 0.6223473851851853, 0.6111272222222222, 0.8211970074074074, 0.684077562962963, 0.8407829925925927, 0.8565303777777777, 0.8633920666666667, 0.8786056370370371, ]
    cifar_decorrel_128 = [ 0.6627668, 0.8146862518518518, 0.5348494222222222, 0.5400590666666667, 0.7372050962962964, 0.6280521185185185, 0.6740222518518518, 0.7841551259259258, 0.7699451703703704, 0.8186068444444444]

    x = np.arange(1, 10+1)

    print(f'roc decorrel : {np.mean(cifar_decorrel_128)}')
    print(f'roc correl : {np.mean(cifar_correl_512)}')

    pyplot.bar(x, cifar_decorrel_128, width=0.25, label = 'decorrelated 128 dim, encoders = 10')
    pyplot.bar(x + 0.25, cifar_correl_512, width=0.25, label='correclated 512 dim, no encoder')
    pyplot.xticks(list(range(1, 10+1)))
    pyplot.legend()
    pyplot.show()
